services:
  jupyter-lab:
    build:
      context: .
      dockerfile: application/Dockerfile
    container_name: mtbf-jupyter-lab
    ports:
      - "8080:${JUPYTER_PORT:-8888}"
    volumes:
      # Mount notebooks directory for persistent storage
      - ./notebooks:${NOTEBOOKS_PATH:-/home/jovyan/work/notebooks}
      # Mount data directory for persistent storage
      - ./data:/home/jovyan/work/data
    env_file:
      - ./application/.env
    environment:
      - JUPYTER_ENABLE_LAB=${JUPYTER_ENABLE_LAB:-yes}
      - JUPYTER_PORT=${JUPYTER_PORT:-8888}
      - JUPYTER_TOKEN=${JUPYTER_TOKEN}
      - JUPYTER_PASSWORD=${JUPYTER_PASSWORD}
      - APP_NAME=${APP_NAME}
      - ENVIRONMENT=${ENVIRONMENT:-development}
      - DATA_RAW_PATH=${DATA_RAW_PATH:-/home/jovyan/work/data/raw-data}
      - DATA_PARSED_PATH=${DATA_PARSED_PATH:-/home/jovyan/work/data/parsed-data}
      - NOTEBOOKS_PATH=${NOTEBOOKS_PATH:-/home/jovyan/work/notebooks}
    restart: unless-stopped
